<Window
    x:Class="MangaTracker.HelpWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:logging="clr-namespace:MangaTracker.Services.Logging"
    Title="Hilfe &amp; Funktionen"
    Height="700"
    Width="900"
    Background="{DynamicResource WindowBackgroundBrush}"
    Foreground="{DynamicResource TextBrush}"
    WindowStartupLocation="CenterOwner"
    ResizeMode="CanResize"
    UseLayoutRounding="True">

    <!-- kleine lokale Typo-Styles (Farben kommen aus deinen Paletten) -->
    <Window.Resources>
        <Style x:Key="H1" TargetType="TextBlock">
            <Setter Property="FontSize" Value="22"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
        </Style>
        <Style x:Key="H2" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="Margin" Value="0,18,0,6"/>
        </Style>
        <Style x:Key="P" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
            <Setter Property="Opacity" Value="0.85"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <!-- Schließen -->
        <Button Content="Schließen"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Padding="12,6"
                Margin="0,0,0,8"
                Click="Close_Click"/>

        <!-- Inhalt -->
        <Border Style="{StaticResource Card}" Padding="16" Margin="0,44,0,0">
            <!-- kein hartes Weiß: Background bleibt Transparent -->
            <ScrollViewer VerticalScrollBarVisibility="Auto" Background="Transparent">
                <StackPanel>
                    <TextBlock Text="MangaTracker – Hilfe &amp; Funktionen" Style="{StaticResource H1}" Margin="0,0,0,12"/>

                    <TextBlock Text="Manga hinzufügen" Style="{StaticResource H2}"/>
                    <TextBlock Style="{StaticResource P}"
                               Text="Titel und Serien-URL eintragen, Status wählen (z. B. Reading). Optional: Kapitel-Template mit $chapter. Mit „Hinzufügen“ landet der Manga in deiner Liste."/>

                    <TextBlock Text="Suchen &amp; Filtern" Style="{StaticResource H2}"/>
                    <TextBlock Style="{StaticResource P}"
                               Text="Die Suche filtert live nach Titeln. Die Tabs schalten Status-Filter um (Alle, Reading, Completed …)."/>

                    <TextBlock Text="Kapitelverwaltung" Style="{StaticResource H2}"/>
                    <TextBlock Style="{StaticResource P}"
                               Text="Mit ▲/▼ die aktuelle Kapitelnummer ändern. Beim Öffnen im integrierten Browser wird das Kapitel automatisch erkannt, wenn ein Template gesetzt ist."/>

                    <TextBlock Text="Links öffnen" Style="{StaticResource H2}"/>
                    <TextBlock Style="{StaticResource P}"
                               Text="„Öffnen“: Kapitel oder Hauptseite aufrufen. Unter Einstellungen → Link-Öffnen festlegen (Fragen/Kapitel/Hauptseite)."/>

                    <TextBlock Text="Updateprüfung (neue Kapitel)" Style="{StaticResource H2}"/>
                    <TextBlock Style="{StaticResource P}"
                               Text="Beim Start wird automatisch nach neuen Kapiteln gesucht. Funde werden gelistet und in der Übersicht markiert."/>

                    <TextBlock Text="Löschen &amp; Rückgängig" Style="{StaticResource H2}"/>
                    <TextBlock Style="{StaticResource P}"
                               Text="Einträge löschen – und mit „Rückgängig“ wiederherstellen. Mehrere Löschungen sind nacheinander rückgängig machbar."/>

                    <TextBlock Text="Speichern, Import &amp; Export" Style="{StaticResource H2}"/>
                    <TextBlock Style="{StaticResource P}"
                               Text="Die Liste wird automatisch in „mangaliste.json“ gespeichert. Über Export/Import kannst du sichern bzw. laden."/>

                    <TextBlock Text="Design-Themes" Style="{StaticResource H2}"/>
                    <TextBlock Style="{StaticResource P}"
                               Text="Unter &quot;Design&quot; Hell, Dunkel oder System w�hlen. Die Einstellung wird gemerkt."/>
                
                    <TextBlock Text="Debug &amp; Diagnose" Style="{StaticResource H2}"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Rescan ausführen" Padding="10,6" Margin="0,0,8,0" Click="Rescan_Click"/>
                        <Button Content="Log leeren" Padding="10,6" Margin="0,0,8,0" Click="ClearLog_Click"/>
                        <Button Content="Log-Ordner öffnen" Padding="10,6" Click="OpenLogFolder_Click"/>
                    </StackPanel>
                    <Border BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" CornerRadius="4" Padding="6">
                        <ListBox ItemsSource="{x:Static logging:DebugLog.Entries}"
                                 Background="{DynamicResource ControlBackgroundBrush}"
                                 Foreground="{DynamicResource TextBrush}"
                                 FontFamily="Consolas, 'Cascadia Code', monospace"
                                 FontSize="12"
                                 MinHeight="220"/>
                    </Border></StackPanel></ScrollViewer></Border></Grid></Window>


